<div class="dashboard-modern">
  <section class="dashboard-cards-modern" aria-label="Riepilogo saldo e movimenti">
    <div class="card-modern card-income">
      <div class="icon-label-row">
        <div class="icon"><svg width="28" height="28" fill="none" stroke="#43a047" stroke-width="2" viewBox="0 0 24 24"><path d="M12 19V5M5 12l7 7 7-7"/></svg></div>
        <span class="label">Entrate</span>
      </div>
      <span class="value">{{ totalIncome | currency:'EUR':'symbol':'1.2-2' }}</span>
    </div>
    <div class="card-modern card-balance">
      <div class="icon-label-row">
        <div class="icon"><svg width="28" height="28" fill="none" stroke="#1976d2" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/></svg></div>
        <span class="label">Saldo</span>
      </div>
      <span class="value">{{ balance | currency:'EUR':'symbol':'1.2-2' }}</span>
    </div>
    <div class="card-modern card-expense">
      <div class="icon-label-row">
        <div class="icon"><svg width="28" height="28" fill="none" stroke="#e53935" stroke-width="2" viewBox="0 0 24 24"><path d="M12 5v14M19 12l-7 7-7-7"/></svg></div>
        <span class="label">Uscite</span>
      </div>
      <span class="value">{{ totalExpense | currency:'EUR':'symbol':'1.2-2' }}</span>
    </div>
  </section>
  <div class="dashboard-content-modern">
    <app-tab-switch [activeTab]="activeTab" (tabChange)="setTab($event)"></app-tab-switch>
    <div class="dashboard-row">
      <ng-container *ngIf="activeTab === 'table'">
        <div class="transactions-section-modern">
          <app-transactions-actions-bar
            [categories]="categories"
            [filterCategory]="filterCategory"
            [filterType]="filterType"
            [searchTerm]="searchTerm"
            (filterTransactions)="filterTransactions()"
            (openAddModal)="openAddModal()"
            (exportTransactions)="exportTransactions()"
            (downloadPDF)="downloadPDF()"
          ></app-transactions-actions-bar>
          <app-transactions-table 
            [transactions]="filteredTransactions" 
            [showRowHighlight]="showRowHighlight"
            (edit)="onEditTransaction($event)"
            (delete)="openRemoveModal($event.id)"></app-transactions-table>
          <app-add-transaction-modal
            *ngIf="showAddModal"
            (add)="addTransaction($event); showAddModal = false"
            (close)="showAddModal = false"
            [categories]="categories"
            [transaction]="editingTransaction"
          ></app-add-transaction-modal>
          <app-modal *ngIf="showModal" [message]="modalMessage" (close)="showModal = false"></app-modal>
        </div>
      </ng-container>
      <ng-container *ngIf="activeTab === 'charts'">
        <div class="chart-section-modern">
          <app-dashboard-charts [transactions]="transactions"></app-dashboard-charts>
        </div>
      </ng-container>
    </div>
  </div>
</div>
